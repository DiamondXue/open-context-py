{% extends 'imports.html' %}
<!DOCTYPE html>

{% block itemcontent %}
     <div class="row">
         <div class="col-sm-9">
            <h2>Import Data to: '{{ proj.label }}'</h2>
         </div>
         <div class="col-sm-3">
            {{ proj.short_des }}
         </div>
     </div>
     <div class="row">
        <div class="col-sm-9">
            <table class="table table-condensed table-hover">
                <thead>
                    <th class="col-sm-1">Select</th>
                    <th class="col-sm-3">Label</th>
                    <th class="col-sm-1">Fields</th>
                    <th class="col-sm-1">Records</th>
                    <th class="col-sm-2">Status</th>
                    <th class="col-sm-2">Current?</th>
                    <th class="col-sm-2">Updated</th>
                </thead>
            </table>
            {% if proj.sources|length > 0 %}
            <div style="overflow-y:auto; max-height:500px;">    
            <table class="table table-condensed table-hover">
                <tbody>
                {% for source in proj.sources %}
                    <tr>
                        <td class="col-sm-1"></td>
                        <td class="col-sm-3">{{ source.label }}</td>
                        <td class="col-sm-1">Fields</td>
                        <td class="col-sm-1">Records</td>
                        <td class="col-sm-2">Status</td>
                        <td class="col-sm-2">Current?</td>
                        <td class="col-sm-2">Updated</td>
                    </tr>
                {% endfor %}
                </tbody>
            </table>
            </div>
            {% endif %}
            {% if proj.refines|length > 0 %}
            <div style="overflow-y:auto; max-height:500px;">    
            <table class="table table-condensed table-hover">
                <tbody>
                {% for refine in proj.refines %}
                    <tr>
                         <td class="col-sm-1">
                            <a title="Import these data" onclick="javascript:import_dialogue('{{ refine.id }}');">
                                <button type="button" class="btn btn-primary"><span class="glyphicon glyphicon-upload"></span></button>
                            </a>
                        </td>
                        <td class="col-sm-3" id="ref-name-{{ refine.id }}">{{ refine.name }}</td>
                        <td class="col-sm-1">-</td>
                        <td class="col-sm-1">-</td>
                        <td class="col-sm-2">Not imported</td>
                        <td class="col-sm-2">-</td>
                        <td class="col-sm-2">{{ refine.modified|date:'Y-m-d H:i' }}</td>
                    </tr>
                {% endfor %}
                </tbody>
            </table>
            </div>
            {% else %}
            <div class="alert alert-warning" role="alert">Don't see data to import? Try turning on Refine first!</div>
            {% endif %}
        </div>
        <div class="col-sm-3">
            <div class="panel panel-default">
                <div class="panel-heading">
                    <h4 class="panel-title">Edit Project</h4>
                </div>
                <div class="panel-body">
                    <form role="form" action="../../imports/edit-project/{{ proj.uuid }}" method="post">
                        {% csrf_token %}
                        <input type="hidden" name="uuid" value="{{ proj.uuid }}" />
                        <div class="form-group">
                            <label for="inputLabel" class="control-label">Project Name</label>
                            <input type="text" name="label" class="form-control" id="inputLabel" value="{{ proj.label }}">
                        </div>
                        <div class="form-group">
                            <label for="inputDes" class="control-label">Short Description</label>
                            <input type="text" name="short_des" class="form-control" id="inputDes" value="{{ proj.short_des }}">
                        </div>
                        <div class="form-group">
                            <button type="submit" class="btn btn-info">Update</button>
                        </div>
                    </form>
                </div>
            </div>
        </div>    
    </div>
{% endblock %} 
